{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 5, "column": 0}, "map": {"version":3,"sources":["file:///c:/Users/igorm/Downloads/next-platform-starter-main/src/component/Popup.tsx"],"sourcesContent":["'use client';\n\nimport { useDispatch, useSelector } from 'react-redux';\nimport { onCheck } from '../store/checkSlice';\nimport { type CheckState } from '../store/checkSlice';\nimport { useCallback } from 'react';\nimport { useTranslations } from 'next-intl';\n\nexport default function Popup() {\n  const t = useTranslations('cards');\n  const check = useSelector(\n    (state: { checkReducer: CheckState }) => state.checkReducer.value\n  );\n\n  const allBooks = useSelector(\n    (state: { checkReducer: CheckState }) => state.checkReducer.books\n  );\n\n  const dispatch = useDispatch();\n\n  const arr = Object.entries(check || []);\n\n  const toCSV = useCallback(() => {\n    const arr = Object.entries(check || []);\n    const arrBooks = Object.entries(allBooks || []);\n\n    const csvString = [\n      ['id:', 'Title:', 'Authors:'],\n      ...arrBooks\n        .filter((item) =>\n          [...new Set(arr.join(',').split(','))].includes(String(item[0]))\n        )\n        .map((item) => [item[1].id, item[1].title, item[1].authors[0]?.name]),\n    ]\n      .map((row) => row.join(';'))\n      .join('\\n');\n\n    const url = 'data:text/csv;charset=utf-8,' + csvString;\n    return url;\n  }, [check, allBooks]);\n\n  return (\n    <div\n      className={`fixed ${arr.length > 0 ? '' : 'invisible'} bottom-6 left-1/2 z-50 -translate-x-1/2 rounded-lg dark:bg-white bg-gray-800 p-2 drop-shadow-2xl`}\n      id=\"gdpr\"\n    >\n      <div className=\"flex flex-col items-center justify-between gap-6 text-sm\">\n        <div className=\"content-left pl-2 dark:text-black text-white\">\n          <div className=\"relative right-2 bottom-4 -mr-6 inline-flex items-center px-1.5 py-0.5 border-2 border-white rounded-full text-2xs font-semibold leading-4 bg-blue-500 text-white\">\n            {arr.length}\n          </div>\n\n          <div className=\"flex justify-center rounded-lg\">\n            <ul className=\" rounded-lg w-auto bg-gray-800 text-white dark:bg-white dark:text-gray-900 \">\n              {arr.map((item, idx) => {\n                const obj = allBooks[Number(item[0])];\n\n                return (\n                  <li\n                    key={'s' + idx}\n                    className=\"px-2 py-2 border-b border-gray-200 w-full items-center flex hover:bg-gray-700 dark:hover:bg-gray-100\"\n                  >\n                    <input\n                      id={'g' + idx}\n                      type=\"checkbox\"\n                      className=\"w-4 h-4 accent-blue-600 mr-2\"\n                      onChange={() => {\n                        dispatch(onCheck({ id: item[0] }));\n                      }}\n                      checked={check[Number(item[0])]}\n                    ></input>\n                    <label\n                      title=\"selected book\"\n                      className=\"inline-flex items-center mr-2\"\n                      htmlFor={'g' + idx}\n                    >\n                      {t('book')}\n                    </label>\n\n                    <p className=\"font-bold\">id: {item[0]}</p>\n                    <p>: {obj?.authors[0]?.name}</p>\n                  </li>\n                );\n              })}\n            </ul>\n          </div>\n        </div>\n        <div className=\"content-right  justify-center gap-1 flex flex-wrap\">\n          <button\n            disabled={arr.length == 0}\n            onClick={() => {\n              arr.forEach((item) => dispatch(onCheck({ id: item[0] })));\n            }}\n            className=\" hover:opacity-80 disabled:opacity-30 active:cursor-pointer m-1 rounded-full dark:bg-gray-800 dark:text-white bg-gray-200 px-4 py-2 text-black\"\n          >\n            {t('unselect')}\n          </button>\n          <a\n            download={`${arr.length}-books.csv`}\n            className=\"hover:opacity-80 disabled:opacity-30 active:cursor-pointer m-1 rounded-full dark:bg-gray-800 dark:text-white bg-gray-200 px-4 py-2 text-black\"\n            href={toCSV()}\n          >\n            {t('download')}\n          </a>\n        </div>\n      </div>\n    </div>\n  );\n}\n"],"names":[],"mappings":"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","debugId":null}}]
}