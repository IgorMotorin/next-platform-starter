(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[809],{255:(e,t,r)=>{"use strict";function a(e){let{moduleIds:t}=e;return null}Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"PreloadChunks",{enumerable:!0,get:function(){return a}}),r(5155),r(7650),r(5744),r(589)},1048:(e,t,r)=>{"use strict";r.d(t,{N_:()=>l,a8:()=>c,rd:()=>i});var a=r(8223),n=r(2388);let{Link:l,redirect:s,usePathname:c,useRouter:i,getPathname:o}=(0,a.A)(n.D)},1437:(e,t,r)=>{Promise.resolve().then(r.bind(r,2146)),Promise.resolve().then(r.bind(r,255)),Promise.resolve().then(r.bind(r,8361))},1608:(e,t,r)=>{"use strict";r.d(t,{D:()=>a});let a=(0,r(2115).createContext)("light")},2146:(e,t,r)=>{"use strict";function a(e){let{reason:t,children:r}=e;return r}Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"BailoutToCSR",{enumerable:!0,get:function(){return a}}),r(5262)},2388:(e,t,r)=>{"use strict";r.d(t,{D:()=>a});let a=(0,r(9984).A)({locales:["en","ru"],defaultLocale:"en"})},2401:(e,t,r)=>{"use strict";r.d(t,{Ay:()=>u,SN:()=>i,aC:()=>n,aE:()=>s,eC:()=>c,lP:()=>l,rL:()=>o});let a=(0,r(5710).Z0)({name:"check",initialState:{value:{},page:"1",search:"",input:"",books:{0:{id:"0",title:"",authors:[{name:""}]}},theme:"light"},reducers:{onCheck:(e,t)=>{if(e.value[t.payload.id]){let r=Object.entries(e.value).filter(e=>e[0]!==String(t.payload.id));e.value=Object.fromEntries(r);return}e.value[t.payload.id]=!e.value[t.payload.id]},onPage:(e,t)=>{e.page=t.payload},onSearch:(e,t)=>{e.search=t.payload},onInput:(e,t)=>{e.input=t.payload},onBooks:(e,t)=>{e.books={...e.books,...t.payload}},onTheme:(e,t)=>{e.theme=t.payload}}}),{onCheck:n,onPage:l,onSearch:s,onInput:c,onBooks:i,onTheme:o}=a.actions,u=a.reducer},2922:(e,t,r)=>{"use strict";r.d(t,{XO:()=>l,zG:()=>c,_H:()=>s});var a=r(404),n=r(4317);let l=(0,a.xP)({baseQuery:(0,n.cw)({baseUrl:"https://gutendex.com/books/"}),endpoints:e=>({getBooks:e.query({query:e=>"?page=".concat(e.page,"&search=").concat(e.search)}),getBook:e.query({query:e=>"".concat(e,"/")})})}),{useGetBooksQuery:s,useGetBookQuery:c}=l},4054:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),!function(e,t){for(var r in t)Object.defineProperty(e,r,{enumerable:!0,get:t[r]})}(t,{bindSnapshot:function(){return s},createAsyncLocalStorage:function(){return l},createSnapshot:function(){return c}});let r=Object.defineProperty(Error("Invariant: AsyncLocalStorage accessed in runtime where it is not available"),"__NEXT_ERROR_CODE",{value:"E504",enumerable:!1,configurable:!0});class a{disable(){throw r}getStore(){}run(){throw r}exit(){throw r}enterWith(){throw r}static bind(e){return e}}let n="undefined"!=typeof globalThis&&globalThis.AsyncLocalStorage;function l(){return n?new n:new a}function s(e){return n?n.bind(e):a.bind(e)}function c(){return n?n.snapshot():function(e,...t){return e(...t)}}},5744:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"workAsyncStorage",{enumerable:!0,get:function(){return a.workAsyncStorageInstance}});let a=r(7828)},5754:(e,t,r)=>{"use strict";r.d(t,{r:()=>a});let a=e=>e?"status"in e?"Ошибка:"+e.status+" "+("object"==typeof e.data&&JSON.stringify(e.data)):void 0:""},6645:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"default",{enumerable:!0,get:function(){return n}});let a=r(8229)._(r(7357));function n(e,t){var r;let n={};"function"==typeof e&&(n.loader=e);let l={...n,...t};return(0,a.default)({...l,modules:null==(r=l.loadableGenerated)?void 0:r.modules})}("function"==typeof t.default||"object"==typeof t.default&&null!==t.default)&&void 0===t.default.__esModule&&(Object.defineProperty(t.default,"__esModule",{value:!0}),Object.assign(t.default,t),e.exports=t.default)},7357:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"default",{enumerable:!0,get:function(){return i}});let a=r(5155),n=r(2115),l=r(2146);function s(e){return{default:e&&"default"in e?e.default:e}}r(255);let c={loader:()=>Promise.resolve(s(()=>null)),loading:null,ssr:!0},i=function(e){let t={...c,...e},r=(0,n.lazy)(()=>t.loader().then(s)),i=t.loading;function o(e){let s=i?(0,a.jsx)(i,{isLoading:!0,pastDelay:!0,error:null}):null,c=!t.ssr||!!t.loading,o=c?n.Suspense:n.Fragment,u=t.ssr?(0,a.jsxs)(a.Fragment,{children:[null,(0,a.jsx)(r,{...e})]}):(0,a.jsx)(l.BailoutToCSR,{reason:"next/dynamic",children:(0,a.jsx)(r,{...e})});return(0,a.jsx)(o,{...c?{fallback:s}:{},children:u})}return o.displayName="LoadableComponent",o}},7828:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"workAsyncStorageInstance",{enumerable:!0,get:function(){return a}});let a=(0,r(4054).createAsyncLocalStorage)()},8361:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>k});var a=r(5155),n=r(2115),l=r(1608),s=r(4540),c=r(2401),i=r(1048),o=r(7652);function u(e){let{name:t="",text:r="",page:u=1,id:d=0,search:h=""}=e,b=(0,o.c3)("cards"),f=(0,n.useContext)(l.D),x=!(0,s.d4)(e=>e.checkReducer.value[d]),m=(0,s.wA)();return(0,a.jsxs)("li",{"data-theme":f,className:"relative m-1  h-44 w-60 rounded-lg bg-gradient-to-tr from-pink-300 to-blue-300  p-0.5 shadow-lg hover:opacity-80 ".concat(x?"":"from-pink-600 to-blue-600"),children:[(0,a.jsx)(i.N_,{scroll:!1,href:"?page=".concat(u,"&search=").concat(h,"&details=").concat(d),"data-theme":f,children:(0,a.jsxs)("div",{className:"bg-white h-35 p-5 rounded-md dark:bg-cyan-950 dark:text-white",children:[(0,a.jsx)("h1",{className:"font-bold text-xl mb-2",children:t.length<20?t:t.slice(0,20)+" ..."}),(0,a.jsx)("p",{children:r.length<45?r:r.slice(0,45)+" ..."})]})}),(0,a.jsxs)("label",{className:"inline-flex items-center ml-2 pt-1",htmlFor:String(d),children:[(0,a.jsx)("input",{id:String(d),type:"checkbox",className:"w-4 h-4 accent-blue-600",onChange:()=>m((0,c.aC)({id:d})),checked:!x}),(0,a.jsx)("span",{className:"ml-2",children:b("cart")})]})]})}function d(e){let{text:t="",run:r=!1}=e;return(0,a.jsxs)("div",{className:r?"absolute p-10 w-full h-full bg-white opacity-90 z-10 visible":"absolute p-10 w-full h-full bg-white opacity-90 z-10 invisible",children:[(0,a.jsx)("div",{className:"flex items-center justify-center",children:(0,a.jsx)("span",{className:"text-2xl mr-4",children:t})}),(0,a.jsx)("button",{onClick:()=>{window.history.back()},className:"max-w-42 min-w-24 py-2 px-2 font-medium rounded-lg transition-colors focus:outline-none bg-blue-600 hover:bg-blue-700 text-white active:bg-blue-600",children:"Назад"})]})}function h(e){let{run:t}=e,r=(0,n.useContext)(l.D);return(0,a.jsx)("div",{"data-testid":"spinner","data-theme":r,className:t?"absolute p-10 w-full h-full bg-white z-10 visible dark:bg-cyan-950 dark:text-white":"absolute p-10 w-full h-full bg-white z-10 invisible dark:bg-cyan-950 dark:text-white",children:(0,a.jsxs)("div",{className:"flex items-center justify-center",children:[(0,a.jsx)("span",{className:"text-2xl mr-4",children:"Loading"}),(0,a.jsxs)("svg",{className:"animate-spin h-8 w-8 text-gray-800 dark:bg-cyan-950 dark:text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[(0,a.jsx)("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),(0,a.jsx)("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]})]})})}var b=r(2922),f=r(5754);function x(){let e=(0,n.useContext)(l.D),t=(0,s.wA)(),r=(0,s.d4)(e=>e.checkReducer.search),i=(0,s.d4)(e=>e.checkReducer.page),o=Number(i),{data:x,error:m,isError:p,isFetching:g}=(0,b._H)({page:i,search:r}),j=(0,n.useMemo)(()=>(null==x?void 0:x.results)||[],[x]);return(0,n.useEffect)(()=>{let e={};j.forEach(t=>{e[t.id]=t}),t((0,c.SN)(e))},[j,t]),(0,a.jsxs)("div",{"data-theme":e,className:"flex dark:bg-cyan-950 dark:text-white",children:[(0,a.jsx)(d,{run:p,text:(0,f.r)(m)||""}),(0,a.jsx)(h,{run:g}),(0,a.jsx)("ul",{className:"flex justify-center content-start flex-wrap dark:bg-cyan-950 dark:text-white","data-theme":e,children:j.length>0?j.map((e,t)=>{var n;return(0,a.jsx)(u,{name:null==(n=e.authors[0])?void 0:n.name,text:e.title,id:Number(e.id),page:o,search:r},t+"a")}):(0,a.jsx)("div",{className:" items-center p-5 rounded-md w-80",children:(0,a.jsx)("h1",{className:"font-bold text-xl mb-2",children:"No result..."})})})]})}var m=r(5695);function p(){let e=(0,o.c3)("cards"),t=(0,n.useContext)(l.D),r=(0,s.d4)(e=>e.checkReducer.search),c=(0,s.d4)(e=>e.checkReducer.page),{data:i,refetch:u}=(0,b._H)({page:c,search:r}),d=Number(c),h=Math.ceil(((null==i?void 0:i.count)||0)/32)||0,f=Array(h>10?10:h).fill(""),x=d%10?d%10:10,p=(0,m.useRouter)(),g=(0,m.usePathname)(),j=(0,m.useSearchParams)().get("search")||"",v=(0,n.useCallback)((e,t)=>{let r=new URLSearchParams;return r.set(e,t),r.toString()},[]);return(0,a.jsxs)("ol",{className:"flex justify-center text-xs font-medium space-x-1 pb-6 dark:bg-cyan-950 dark:text-white","data-theme":t,children:[(0,a.jsx)("li",{children:(0,a.jsx)("button",{onClick:()=>{p.push(g+"?"+v("search",j)+"&"+v("page",String(d<2?1:Number(d)-1)))},disabled:d<2,className:"inline-flex items-center justify-center w-8 h-8 border border-gray-100 rounded ".concat(d<2?"":"hover:bg-blue-200  active:text-white active:bg-blue-600 active:border-blue-600"," "),children:(0,a.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",className:"w-3 h-3",viewBox:"0 0 20 20",fill:"currentColor",children:(0,a.jsx)("path",{fillRule:"evenodd",d:"M12.707 5.293a1 1 0 010 1.414L9.414 10l3.293 3.293a1 1 0 01-1.414 1.414l-4-4a1 1 0 010-1.414l4-4a1 1 0 011.414 0z",clipRule:"evenodd"})})})}),f.map((e,t)=>(0,a.jsx)("li",{children:(0,a.jsxs)("button",{onClick:()=>{p.push(g+"?"+v("search",j)+"&"+v("page",String(10*Math.floor((d-1)/10)+t+1)))},className:t+1==x?"block w-8 h-8 text-center border rounded leading-8 text-white bg-blue-600 border-blue-600":"block w-8 h-8 text-center border border-gray-100 rounded leading-8 hover:bg-blue-200",children:[" ",10*Math.floor((d-1)/10)+t+1," "]})},"f"+e+t)),(0,a.jsx)("li",{children:(0,a.jsx)("button",{onClick:()=>{p.push(g+"?"+v("search",j)+"&"+v("page",String(d>h-1?h:Number(d)+1)))},disabled:d>h-1,className:"inline-flex items-center justify-center w-8 h-8 border border-gray-100 rounded ".concat(d>h-1?"":"hover:bg-blue-200 active:text-white active:bg-blue-600 active:border-blue-600"," "),children:(0,a.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",className:"w-3 h-3",viewBox:"0 0 20 20",fill:"currentColor",children:(0,a.jsx)("path",{fillRule:"evenodd",d:"M7.293 14.707a1 1 0 010-1.414L10.586 10 7.293 6.707a1 1 0 011.414-1.414l4 4a1 1 0 010 1.414l-4 4a1 1 0 01-1.414 0z",clipRule:"evenodd"})})})}),(0,a.jsx)("li",{children:(0,a.jsx)("button",{onClick:()=>{u()},className:"inline-flex p-1 items-center justify-center w-auto h-8 border border-gray-100 rounded hover:bg-blue-200 active:text-white active:bg-blue-600 active:border-blue-600",children:e("cache")})})]})}var g=r(6645),j=r.n(g);let v=j()(()=>r.e(440).then(r.bind(r,440)),{loadableGenerated:{webpack:()=>[440]},ssr:!1}),y=j()(()=>r.e(501).then(r.bind(r,7501)),{loadableGenerated:{webpack:()=>[7501]}}),w=j()(()=>r.e(859).then(r.bind(r,859)),{loadableGenerated:{webpack:()=>[859]}});function k(){return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(v,{}),(0,a.jsx)(p,{}),(0,a.jsx)(x,{}),(0,a.jsx)(w,{}),(0,a.jsx)(y,{})]})}}},e=>{e.O(0,[271,351,441,964,358],()=>e(e.s=1437)),_N_E=e.O()}]);